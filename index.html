<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NANO OMNI AI | Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; background: #0a0a0c; color: #f4f4f5; margin: 0; overflow: hidden; }
        .main-grid { display: grid; grid-template-columns: 1fr 400px; height: 100vh; }
        .chat-section { display: flex; flex-direction: column; border-left: 1px solid #27272a; background: #09090b; }
        .display-section { background: #000; display: flex; items: center; justify-content: center; padding: 20px; position: relative; }
        .glass-input { background: #18181b; border: 1px solid #27272a; border-radius: 20px; padding: 15px; width: 100%; color: white; outline: none; transition: 0.3s; }
        .glass-input:focus { border-color: #3b82f6; box-shadow: 0 0 15px rgba(59, 130, 246, 0.2); }
        .btn-primary { background: linear-gradient(135deg, #2563eb, #1d4ed8); border-radius: 15px; padding: 12px 25px; font-weight: bold; transition: 0.3s; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(37, 99, 235, 0.4); }
        .response-bubble { background: #18181b; border-radius: 20px; padding: 20px; margin-bottom: 20px; border-right: 4px solid #3b82f6; }
        .mic-btn { width: 60px; height: 60px; border-radius: 50%; background: #27272a; display: flex; items: center; justify-content: center; cursor: pointer; transition: 0.3s; }
        .mic-active { background: #ef4444; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(239, 68, 68, 0); } 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); } }
    </style>
</head>
<body>

    <div class="main-grid">
        <section class="display-section">
            <div id="mediaPlaceholder" class="text-center">
                <div class="text-6xl mb-4 opacity-20">ğŸ¬</div>
                <p class="text-gray-500 font-bold">Ø´Ø§Ø´Ø© Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø°ÙƒÙŠØ© NANO</p>
                <p class="text-xs text-gray-700">Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ Ø¨Ø¯Ù‚Ø© Ø¹Ø§Ù„ÙŠØ©</p>
            </div>
            <div id="mediaTarget" class="hidden w-full h-full flex items-center justify-center"></div>
            <div id="loader" class="hidden absolute inset-0 bg-black/80 z-10 flex items-center justify-center">
                <div class="w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
            </div>
        </section>

        <section class="chat-section p-6">
            <div class="flex items-center gap-3 mb-8">
                <div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center font-black text-xl">N</div>
                <h1 class="text-xl font-black tracking-widest">NANO OMNI</h1>
            </div>

            <div id="chatHistory" class="flex-1 overflow-y-auto mb-6 pr-2">
                <div class="response-bubble">
                    <p class="text-blue-400 text-sm font-bold mb-1">NANO AI:</p>
                    <p>Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒÙ. Ø£Ù†Ø§ Ù†Ø¸Ø§Ù… NANO Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„. Ø¬Ø§Ù‡Ø² Ù„ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØµÙˆØ±ØŒ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§ØªØŒ ÙˆØ§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„ØµÙˆØªÙŠØ© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©. ÙƒÙŠÙ Ø£Ø®Ø¯Ù…ÙƒÙØŸ</p>
                </div>
            </div>

            <div class="space-y-4">
                <textarea id="userInput" class="glass-input h-24 resize-none" placeholder="Ø§ÙƒØªØ¨ÙŠ Ø£ÙˆØ§Ù…Ø±Ùƒ Ù‡Ù†Ø§..."></textarea>
                <div class="flex gap-2">
                    <button onclick="process('chat')" class="btn-primary flex-1">Ø¯Ø±Ø¯Ø´Ø© ğŸ’¬</button>
                    <button onclick="process('image')" class="bg-zinc-800 hover:bg-zinc-700 p-4 rounded-xl font-bold">ØµÙˆØ±Ø© ğŸ–¼ï¸</button>
                    <button onclick="process('video')" class="bg-zinc-800 hover:bg-zinc-700 p-4 rounded-xl font-bold">ÙÙŠØ¯ÙŠÙˆ ğŸ¬</button>
                    <div id="micBtn" onclick="toggleMic()" class="mic-btn">ğŸ™ï¸</div>
                </div>
            </div>
        </section>
    </div>

    <script>
        const history = document.getElementById('chatHistory');
        const media = document.getElementById('mediaTarget');
        const placeholder = document.getElementById('mediaPlaceholder');
        const loader = document.getElementById('loader');

        // 1. Ù†Ø¸Ø§Ù… Ø§Ù„ØµÙˆØª ÙˆØ§Ù„Ù†Ø·Ù‚
        function speak(text) {
            window.speechSynthesis.cancel();
            const utter = new SpeechSynthesisUtterance(text);
            utter.lang = 'ar-SA';
            utter.rate = 1.1;
            window.speechSynthesis.speak(utter);
        }

        // 2. Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØª (Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©)
        let recognition;
        if ('webkitSpeechRecognition' in window) {
            recognition = new webkitSpeechRecognition();
            recognition.lang = 'ar-SA';
            recognition.onresult = (e) => {
                const speech = e.results[0][0].transcript;
                document.getElementById('userInput').value = speech;
                process('chat');
            };
            recognition.onend = () => document.getElementById('micBtn').classList.remove('mic-active');
        }

        function toggleMic() {
            if (!recognition) return alert("Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØª");
            document.getElementById('micBtn').classList.add('mic-active');
            recognition.start();
        }

        // 3. Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø°ÙƒÙŠØ©
        async function process(type) {
            const input = document.getElementById('userInput').value;
            if (!input && type !== 'chat') return;

            loader.classList.remove('hidden');

            if (type === 'chat') {
                try {
                    // Ù†Ø¸Ø§Ù… Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ù…ÙØ±ÙˆØ¶Ø©
                    const res = await fetch(`https://text.pollinations.ai/${encodeURIComponent("Ø£Ù†Øª Ø§Ø³Ù…Ùƒ Ù†Ø§Ù†Ùˆ (NANO)ØŒ Ù†Ø¸Ø§Ù… Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙØ®Ù… ÙˆØ§Ø­ØªØ±Ø§ÙÙŠ. Ø£Ø¬Ø¨ Ø¨Ø§Ø®ØªØµØ§Ø±: " + input)}`);
                    const reply = await res.text();
                    
                    history.innerHTML += `
                        <div class="response-bubble animate-fade-in">
                            <p class="text-blue-400 text-sm font-bold mb-1">NANO AI:</p>
                            <p>${reply}</p>
                        </div>`;
                    history.scrollTop = history.scrollHeight;
                    speak(reply);
                } catch (e) { console.error(e); }
                loader.classList.add('hidden');
            } 
            
            else if (type === 'image' || type === 'video') {
                const url = `https://pollinations.ai/p/${encodeURIComponent(input)}?width=1024&height=1024&seed=${Math.random()}&model=flux`;
                
                placeholder.classList.add('hidden');
                media.classList.remove('hidden');
                
                const img = new Image();
                img.src = url;
                img.className = (type === 'video') ? "w-full h-full object-cover rounded-3xl animate-pulse shadow-2xl" : "max-w-full max-h-full object-contain rounded-2xl shadow-2xl border-4 border-zinc-800";
                
                img.onload = () => {
                    media.innerHTML = '';
                    media.appendChild(img);
                    loader.classList.add('hidden');
                    speak(type === 'image' ? "ØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­" : "ØªÙ… Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ø´Ù‡Ø¯ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ");
                };
            }
        }
    </script>
</body>
</html>
